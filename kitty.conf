# Kitty Configuration
# Based on iTerm2 Firewatch theme and settings

# Font configuration
font_family      Fira Code
bold_font        Fira Code Bold
italic_font      Fira Code Light
bold_italic_font Fira Code Medium

font_size 12.0

# Enable font ligatures
disable_ligatures never

# Font rendering - let kitty handle ligatures automatically

# Window settings
initial_window_width  80c
initial_window_height 25c

# Window padding
window_padding_width 4

# Window layout
remember_window_size  yes
enabled_layouts       splits,tall:bias=50;full_size=1;mirrored=false,stack

# Color scheme based on Firewatch theme (converted from iTerm2 RGB values)
# Basic colors
foreground #9ba2b2
background #1e2027
selection_foreground #7d8fa3
selection_background #2e3642

# Cursor colors
cursor #f6f7ed
cursor_text_color #c4c5b5

# URL underline color and style
url_color #4d89c4
url_style curly

# Window borders and title bar
window_border_width 1pt
draw_minimal_borders yes
window_margin_width 0
single_window_margin_width -1

# Active window (focused pane border)
active_border_color #44a8b6
inactive_border_color #58606f

# Tabs with custom process icons
tab_bar_edge bottom
tab_bar_style custom
tab_title_template "{index}: {title}"

# Tab activity indicators
tab_activity_symbol ðŸ””
tab_switch_strategy previous

# Active tab colors (cyan accent for visibility)
active_tab_foreground   #1e2027
active_tab_background   #44a8b6
active_tab_font_style   bold

# Inactive tab colors
inactive_tab_foreground #9ba2b2
inactive_tab_background #2e3642
inactive_tab_font_style normal

# Color table (Firewatch theme - converted from iTerm2 RGB values)
# Black
color0 #58606f
color8 #58606f

# Red
color1 #d9537a
color9 #d9537a

# Green
color2  #5ab977
color10 #5ab977

# Yellow
color3  #dfb563
color11 #dfb563

# Blue
color4  #4d89c4
color12 #4c8ac4

# Magenta
color5  #d55119
color13 #d55119

# Cyan
color6  #44a8b6
color14 #44a8b6

# White
color7  #e6e5ff
color15 #e6e5ff

# Terminal bell
enable_audio_bell no
visual_bell_duration 0.0

# Mouse
mouse_hide_wait 3.0
url_prefixes http https file ftp gemini irc gopher mailto news git

# Performance tuning
repaint_delay 10
input_delay 3
sync_to_monitor yes

# Shell integration
shell_integration enabled

# Scrollback
scrollback_lines 2000
scrollback_pager less --chop-long-lines --RAW-CONTROL-CHARS +INPUT_LINE_NUMBER

# Advanced
editor vim
close_on_child_death no
allow_remote_control yes
listen_on unix:@mykitty
update_check_interval 24
startup_session none
clipboard_control write-clipboard write-primary

# Python paths for custom scripts
# Note: Ensure the kitty-customizations directory is in PYTHONPATH or use absolute path
tab_bar_script kitty-customizations/tab_bar.py

# OS specific settings
macos_titlebar_color background
macos_option_as_alt yes
macos_hide_from_tasks no
macos_quit_when_last_window_closed yes
macos_window_resizable yes
macos_thicken_font 0
macos_traditional_fullscreen no
macos_show_window_title_in all
macos_menubar_title_max_length 0

# Key mappings
# Tab navigation (cmd+1 through cmd+9, cmd+0 for last tab)
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9
map cmd+0 goto_tab -1

# New tab (opens at current working directory)
map cmd+t new_tab_with_cwd

# Close pane (closes tab when last pane)
map cmd+w close_window

# Next/previous tab
map cmd+shift+] next_tab
map cmd+shift+[ previous_tab

# Window splitting (pane splitting)
map cmd+d launch --location=hsplit --cwd=current
map cmd+shift+d launch --location=vsplit --cwd=current

# Pane navigation (use cmd+opt for panes, cmd+shift for tabs)
map cmd+opt+] next_window
map cmd+opt+[ previous_window
map cmd+opt+left neighboring_window left
map cmd+opt+right neighboring_window right
map cmd+opt+up neighboring_window up
map cmd+opt+down neighboring_window down

# Force close tab (bypass pane logic)
map cmd+shift+w close_tab

# New window
map cmd+n new_os_window

# Font size
map cmd+plus     change_font_size all +2.0
map cmd+minus    change_font_size all -2.0
map cmd+ctrl+0   change_font_size all 0

# Copy/paste
map cmd+c copy_to_clipboard
map cmd+v paste_from_clipboard

# Search
map cmd+f launch --type=overlay --stdin-source=@screen_scrollback /usr/bin/less +G -R

# Scrolling
map cmd+up    scroll_line_up
map cmd+down  scroll_line_down
map cmd+page_up   scroll_page_up
map cmd+page_down scroll_page_down
map cmd+home scroll_home
map cmd+end  scroll_end

# Clear screen
map cmd+k combine : clear_terminal scrollback active : send_text normal,application \x0c

# Reload config
map cmd+shift+r load_config_file

# Toggle fullscreen
map cmd+ctrl+f toggle_fullscreen
map cmd+enter toggle_fullscreen

# Layout management
map cmd+ctrl+l next_layout

# Hotkey window support (similar to iTerm2's ctrl+` functionality)
# Hide window when focus is lost (for hotkey window behavior)
hide_window_decorations titlebar-only
macos_hide_from_tasks no

# Window animation settings
window_animation_duration 0.2
window_animation_type slide

# Additional useful keybindings
# Select all
map cmd+a select_all

# Move tab left/right
map cmd+shift+left move_tab_backward
map cmd+shift+right move_tab_forward

# Zoom pane (similar to tmux)
map cmd+shift+z toggle_layout stack

# Reset terminal
map cmd+r clear_terminal reset active

# Open new window with current directory
map cmd+shift+n new_os_window_with_cwd

# Select and copy word
map cmd+ctrl+w select_word

# Select and copy line
map cmd+ctrl+shift+l select_line

# Paste from selection (middle-click behavior)
map shift+insert paste_from_selection

# Word-based navigation and editing
map cmd+left send_text all \x01
map cmd+right send_text all \x05
map ctrl+h send_text all \x1bb
map ctrl+l send_text all \x1bf
map cmd+backspace send_text all \x15
map ctrl+backspace send_text all \x17
map cmd+delete send_text all \x0b